<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All User's Posts</title>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
</head>

<body>
    <div class="main-container p-10 min-h-screen bg-gray-100 flex flex-col items-center relative w-full bg-cover bg-center bg-fixed"
        style="background-image: url('https://images.unsplash.com/photo-1534237710431-e2fc698436d0?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');">

        <div class="absolute inset-0 bg-black/70"></div>

        <div class="main-body relative w-full max-w-6xl">
            <!-- <div class="w-full flex justify-between items-center mb-8">
                <div class="hide"></div>
                <div class="mid flex flex-wrap justify-center gap-4">
                    <div class="img h-10 w-10 rounded-full overflow-hidden">
                        <img src="/images/toupload/<%= user.profilepic %>" alt="User Avatar"
                            class="object-cover w-full h-full">
                    </div>
                    <h2 class="text-3xl font-bold text-white">
                        <%= user.name %>'s Posts
                    </h2>
                </div>
                <a href="/profile" class="text-blue-400 hover:underline">Go Back</a>
            </div> -->

            <!-- Sticky Navbar -->
            <div
                class="fixed top-0 left-0 w-full bg-white/10 backdrop-blur-lg py-3 sm:py-4 px-4 sm:px-6 flex flex-wrap justify-between items-center shadow-md z-50">

                <!-- User Info -->
                <div class="flex items-center gap-3 sm:gap-4">
                    <img src="/images/toupload/<%= user.profilepic %>" alt="User Avatar"
                        class="h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-gray-400 object-cover shadow-md">
                    <h2 class="text-white text-sm sm:text-lg font-medium">Welcome, <%= user.name %>
                    </h2>
                </div>

                <!-- Navigation -->
                <div class="flex gap-2 sm:gap-4 flex-wrap justify-center">
                    <!-- Go Back Button -->
                    <a href="/profile"
                        class="px-4 sm:px-5 py-2 bg-white/20 text-white text-xs sm:text-sm font-medium rounded-md transition hover:bg-white/30 focus:ring-2 focus:ring-white/50 backdrop-blur-md">
                        Go Back
                    </a>

                    <!-- Logout Button -->
                    <a href="/logout"
                        class="px-4 sm:px-5 py-2 bg-red-500/80 text-white text-xs sm:text-sm font-medium rounded-md transition hover:bg-red-500 focus:ring-2 focus:ring-red-400 backdrop-blur-md">
                        Logout
                    </a>
                </div>
            </div>

            <!-- Prevent Overlap -->
            <div class="pt-20"></div>



            <div class="post-container w-full flex flex-wrap gap-6 justify-center">
                <!-- yahan p loop lagana hai aur check karna hai ki post present haiya nahin!!!! -->

                <% if(user.posts.length> 0) { %>
                    <% user.posts.reverse().forEach(function(val) { %>
                        <div class="post bg-white p-6 rounded-lg shadow-md w-80 transition duration-300 ease-in-out 
                        hover:shadow-[0_0_20px_rgba(255,255,255,0.5)]">
                            <div class="img mb-4 bg-red-500 rounded-lg overflow-hidden">

                                <img src="/images/toupload/<%= val.userSubmittedImage %>" alt="Post Image"
                                    class="w-full h-60 object-cover rounded-md transition duration-300 ease-in-out hover:scale-110">

                            </div>
                            <p class="text-gray-700 mb-3">
                                <%= val.content %>
                            </p>
                            <div class="likes text-gray-600 font-medium mb-4">
                                <%= val.likes.length %> likes
                            </div>
                            <div class="links flex justify-between">
                                <div class="likeAndEdit flex gap-4">
                                    <a href="/like/<%= val._id %>" class="text-blue-600 hover:underline">
                                        <%= (val.likes.indexOf(user._id)===-1) ? "Like" : "Unlike" %>
                                    </a>
                                    <a href="/edit/<%= val._id %>" class="text-green-600 hover:underline">Edit</a>
                                </div>
                                <div class="delete">
                                    <a href="/delete/<%= val._id %>" class="text-red-600 hover:underline">Delete</a>
                                </div>
                            </div>
                        </div>
                        <% }) %>
                            <% } else { %>
                                <div class="no-post flex flex-col items-center mt-10">
                                    <div
                                        class="bg-white px-6 py-5 rounded-lg shadow-lg border border-gray-300 flex flex-col items-center">
                                        <img src="https://cdn-icons-png.flaticon.com/512/4076/4076432.png"
                                            alt="No Posts" class="w-24 h-24 opacity-60 mb-3">
                                        <h2 class="text-gray-500 text-2xl font-semibold">No Posts Yet</h2>
                                        <p class="text-gray-400 mt-1 text-sm">Start sharing your thoughts!</p>
                                    </div>
                                </div>
                                <% } %>
            </div>
        </div>
    </div>
</body>

</html>